<h1>Recommended Libraries</h1>

<div class="row">
  <div class="col-md-8">
    <%= render collection: @projects, partial: 'subscriptions/project' %>
    <%= will_paginate @projects, page_links: false %>
  </div>
  <div class="col-md-4">
    <h3>
      <strong>
        What's this based on?
      </strong>
    </h3>
    <p>
      Recommendations are based on data from your
      <%= link_to 'GitHub Profile', user_path(current_user.nickname) %> and Libraries data.
    </p>
    <p>
      That includes libraries your repositories depend on, projects you watch and popular libraries written in languages you use.
    </p>
    <p>
      Not seeing anything interesting to you? <%= link_to 'Let us know.', 'mailto:support@libraries.io' %>
    </p>

    <h3>
      <strong>
        Filter by platform
      </strong>
    </h3>
    <div class="facets">
      <ul class='filter'>
        <% @platforms.each do |platform| %>
          <li class='<%= 'active' if platform.downcase == params[:platform].try(:downcase) %>'>
            <% if platform.downcase == params[:platform].try(:downcase) %>
              <%= link_to platform, url_for(params.merge(platform: nil)) %>
            <% else %>
              <%= link_to platform, url_for(params.merge(platform: platform)) %>
            <% end %>
          </li>
        <% end %>
      </ul>
    </div>

    <h3>
      <strong>
        Filter by language
      </strong>
    </h3>
    <div class="facets">
      <ul class='filter'>
        <% @languages.each do |language| %>
          <li class='<%= 'active' if language.downcase == params[:language].try(:downcase) %>'>
            <% if language.downcase == params[:language].try(:downcase) %>
              <%= link_to language, url_for(params.merge(language: nil)) %>
            <% else %>
              <%= link_to language, url_for(params.merge(language: language)) %>
            <% end %>
          </li>
        <% end %>
      </ul>
    </div>

    <h3>
      <strong>
        Filter by license
      </strong>
    </h3>
    <div class="facets">
      <ul class='filter'>
        <% @licenses.each do |license| %>
          <li class='<%= 'active' if license.downcase == params[:license].try(:downcase) %>'>
            <% if license.downcase == params[:license].try(:downcase) %>
              <%= link_to license, url_for(params.merge(license: nil)) %>
            <% else %>
              <%= link_to license, url_for(params.merge(license: license)) %>
            <% end %>
          </li>
        <% end %>
      </ul>
    </div>
  </div>
</div>
